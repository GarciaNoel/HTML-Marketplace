<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Marketplace</title>
  <style>
    .page-mp-root {
      padding-left: 10px;
    }
    .llm-coin {
      display: inline-block;
      margin-left: 16px;
      font-weight: bold;
      color: #e6b800;
    }
  </style>
</head>
<body>
  <div class="page-mp-root">
    <h1>
      Open File Extensions
      <span class="llm-coin" id="llm-coin">ðŸª™ 0</span>
    </h1>
    <button id="test2">Open HTML File(s)</button>
    <button id="use-llm-btn">Use LLM</button>
  </div>
  <script>
    let llmCoin = 0;
    const llmCoinSpan = document.getElementById('llm-coin');

    (async () => {
      const saved = await window.electronAPI.loadPersistent?.('llmCoin');

      if (typeof saved === 'number') {
        llmCoin = saved;
        llmCoinSpan.textContent = `ðŸª™ ${llmCoin}`;

      }
    })();

    function incrementCoin() {
      llmCoin++;
      llmCoinSpan.textContent = `ðŸª™ ${llmCoin}`;
      window.electronAPI.savePersistent?.('llmCoin', llmCoin);
    }

    const test2Btn = document.getElementById('test2');

    test2Btn.onclick = async (e) => {
      e.preventDefault();
      const files = await window.electronAPI.openHtmlFiles();
      files.forEach(file => window.electronAPI.addTab(file.name, file.content));
    };

    document.getElementById('use-llm-btn').onclick = async () => {
      incrementCoin();
    };
  </script>
</body>
</html>